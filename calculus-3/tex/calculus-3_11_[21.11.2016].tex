\documentclass[a4paper, 12pt]{article}
\usepackage{header}

\begin{document}
\newcommand{\tto}{\rightrightarrows}
\newcommand{\dx}{\mathrm{d}x}
\renewcommand{\d}{\mathrm{d}}
\pagestyle{fancy}

\section{Лекция 11 от 21.11.2016 \\ Функциональные последовательности. Интегрирование и дифференцирование.}

\subsection{Частные случаи двойных пределов}

Повторим и немного продолжим результаты прошлой лекции.

\begin{Statement}
	Пусть $\B$ --- база на $X$ и $\forall n \in \N$ существует предел $\lim\limits_\B f_n(x) = a_n$, и при этом $f_n(x) \overset{X}{\tto} f(x)$. Тогда существуют и равны пределы $\lim\limits_{n \to \infty} a_n$ и $\lim\limits_{\B}f(x)$:
	$$
	\lim\limits_{n \to \infty} a_n = \lim\limits_{n \to \infty}\lim\limits_{\B}f_n(x) = \lim\limits_{\B}\lim\limits_{n \to \infty} f_n(x) = \lim\limits_{\B}f(x).
	$$
\end{Statement}

Отметим, что равномерная сходимость это удобное, но завышенное требование.

\begin{Consequence}
	Пусть $\B$ --- база на $X$ и $\forall n \in \N$ существует предел $\lim\limits_{\B}f_n(x) = a_n$, и при этом $\sseries f_n(x) \overset{X}{\tto} S(x)$. Тогда существуют и равны пределы $\sseries a_n$ и $\lim\limits_{\B} S(x)$:
	$$
	\sseries a_n =  \sseries \lim\limits_{\B}f_n(x) = \lim\limits_{\B}\sseries f_n(x) =	\lim\limits_{\B} S(x).
	$$
	То есть при наличии равномерной сходимости порядок этих действий не важен.
\end{Consequence}

Это действительно следствие предыдущего утверждения, потому что
$$
S(x) \leftleftarrows S_n(x) = f_1(x) + \ldots + f_n(x) \underset{\B}{\rarr} a_1 + \ldots + a_n.
$$

\begin{Consequence}
	Пусть $I$ --- невырожденный промежуток на $\R$ и $\forall n \in \N$: $f_n(x) \in C(I)$ и $f_n(x) \overset{I}{\underset{n \to \infty}{\tto}} f(x)$. Тогда $f(x) \in C(I)$. 
\end{Consequence}

\begin{Consequence}
	Пусть $I$ --- невырожденный промежуток на $\R$ и $\forall n \in \N$: $f_n(x) \in C(I)$ и $\sseries f_n(x) \overset{I}{\tto} S(x)$. Тогда $S(x) \in C(I)$. 
\end{Consequence}

\subsection{Связь с интегрированием}
Вспомним, что интеграл Римана это тоже предел по базе.
\begin{Statement}
	Пусть $\forall n \in \N$: $f_n(x) \in R[a, b]$, то есть интегрируема по Риману на отрезке $[a, b]$, и $f_n(x) \uconv{[a, b]}{n \to \infty} f(x)$.  Тогда $f(x) \in R[a, b]$ и 
	$$
	\int\limits_a^b f(x) \dx = \int\limits_a^b\lim\limits_{n \to \infty} f_n(x) \dx = \lim\limits_{n \to \infty} \int\limits_a^b f_n(x) \dx.
	$$
\end{Statement}

Можно сказать, это теорема о перестановке интеграла и предельного перехода.

Перед тем как приступить к доказательству, задумаемся: а может быть, требование равномерной сходимости это слишком строго? Однако поточечной явно не хватает. Подтвердим это несколькими примерами.
\begin{itemize}
\item
Пронумеруем все рациональные числа: $r_1,\ r_2,\ \ldots$, и определим функции следующим образом:
$$
f_n(x) = \begin{cases}
1, & x \in \{r_1, \ldots, r_n \}; \\
0, & \text{иначе}.
\end{cases}
$$
Поточечно это будет сходиться к функции Дирихле, каждая отдельная функция $f_n$ интегрируема, а вот $\{f_n\}$ --- нет. 
\item
$$
f_n(x) = \begin{cases}
0, & x \in [0, 1/n); \\
1/x, & x \in [1/n, 1].
\end{cases}
$$
По отдельности все функции интегрируемы, а поточечно это будет стремится к 
$$
f(x) = \begin{cases}
1/x, & x \in (0, 1]; \\
0, & x = 0.
\end{cases}
$$
\item
Функция $f_n(x)$ задает равнобедренный треугольник с основанием на оси $OX$ от 0 до $1/n$ и высотой $2n$. Тогда каждый интеграл равен 1, а поточечно оно стремится к нулю. То есть все существует, но равенства нет. 
\end{itemize}
Итого, поточечной сходимости явно недостаточно. Но честно говоря, равномерной сходимости действительно хватает с избытком, но об этом как-нибудь потом.

Теперь приступим к доказательству.
\begin{proof}
Покажем, что это частный случай теоремы о перестановке пределов.

Пусть $X = \{(\tau, \xi) \}$ --- это множество всех отмеченных разбиений $[a, b]$ (то есть таких, на каждом отрезке которого зафиксирована произвольная точка $\xi_i$), $\sigma_n(\tau, \xi)$ --- значение интегральной суммы Римана для функции $f_n(x)$, соответствующее отмеченному разбиению $(\tau, \xi)$. Тогда $\{\sigma_n(\tau, \xi) \}_{n=1}^\infty$ --- последовательность функций, определенных на $X$. Также обозначим за $\sigma(\tau, \xi)$ интегральную сумму Римана для функции $f(x)$.

Докажем, что $\sigma_n(\tau, \xi) \uconv{X}{n \to \infty} \sigma(\tau, \xi)$. Действительно, зафиксируем произвольное $\eps > 0$, тогда $\exists N \in \N\ \forall n > N\ \forall x \in[a, b]:\ |f_n(x) - f(x)| < \dfrac{\eps}{b-a}$.

Тогда $\forall n > N$ и $\forall (\tau, \xi) \in X$ ($M$ --- количество отрезков в разбиении $\tau$, $\Delta_m$ --- длина $m$-ого отрезка):
\begin{gather}
|\sigma(\tau, \xi) - \sigma_n(\tau, \xi)| = \left| \sum\limits_{m=1}^{M}f_n(\xi_m)\Delta_m - \sum\limits_{m=1}^{M}f(\xi_m)\Delta_m \right| \leq \sum\limits_{m=1}^M \left| (f_n(\xi_m) - f(\xi_m))\Delta_m \right| \leq \frac{\eps}{b-a}\sum\limits_{m=1}^M \Delta_m = \eps.
\end{gather}

Получается, что $\forall n \in \N$ и $\forall (\tau, \xi) \in X$ существует предел $\lim\limits_\B \sigma_n(\tau, \xi) = \int\limits_a^bf_n(x)\dx$ (здесь $\B$ --- база Римана).

Итого, $\sigma_n \uconv{X}{n \to \infty} \sigma$, а значит, по теореме о перестановке двух пределов, существуют и равны пределы $\lim\limits_{n \to \infty} \int\limits_a^b f_n(x) \dx$ и $\lim\limits_{\B}\sigma(\tau, \xi) = \int\limits_a^bf(x)dx$.
\end{proof}

\begin{Consequence}
Пусть $\forall n \in N$: $f_n(x) \in R[a, b]$ и $\sseries f_n(x) \uconv{[a, b]}{} S(x)$. Тогда $S(x) \in R[a, b]$ и 
$$
\int\limits_a^bS(x) \dx = \int\limits_a^b \left(\sseries f_n(x)\right) \dx = \sseries \int\limits_a^b f_n(x)\dx.
$$
\end{Consequence}

\subsection{Связь с дифференцированием}
\begin{Statement}
Пусть $I$ --- невырожденный промежуток на $\R$ и $\forall n \in \N$ $f_n(x) \in C'(I)$ (то есть непрерывно дифференцируема) и $\exists x_0 \in I$ такое, что $\{f_n(x_0) \}_{n=1}^\infty$ сходится, но при этом $f'_n(x) \uconv{I}{}g(x)$.
Тогда $f_n(x) \overset{I}{\to} f(x)$ (поточечно!), причем на каждом ограниченном подмножестве $I$ сходимость будет равномерной, $f(x) \in C'(I)$ и $f'(x) = g(x)$ на $I$.
\end{Statement}

Что это вообще означает? Фактически это похоже на перестановку пределов:
$$
(\lim\limits_{n \to \infty} f_n(x))' = \lim\limits_{n \to \infty} f'_n(x). 
$$

\begin{proof}
Вообще говоря, это сразу следует из прошлого утверждения и формулы Ньютона--Лейбница. Но распишем.

Заметим, что $\forall x \in I$: $f_n(x) = f_n(x_0) + \int\limits_{x_0}^x f'_n(t) \d t$. При этом $f_n(x_0) \uconv{}{n \to \infty} \alpha$ (так как вообще не зависит от $x$), а $f'_n(t) \uconv{I}{} g(x)$.

Получается, что $f_n(x)$ поточечно на $I$ сходится к $\alpha + \int\limits_{x_0}^x g(t)\d t = f(x)$. При этом очевидно $f(x) \in D(I)$ (т.е. дифференцируема) и $f'(x) = g(x)$. Итого, $f(x) \in C'(I)$.

Осталось показать равномерную сходимость на ограниченном подмножестве $I$.

Для любого $E$ --- ограниченного подмножества $I$ --- верно, что $\int\limits_{x_0}^xf'_n(t) \d t \uconv{E}{n \to \infty} \int\limits_{x_0}^x g(t) \d t$. Также, в силу ограниченности, $\exists C > 0\ \forall x \in E: \ |x_0 - x| < C$.

Зафиксируем произвольное $\eps > 0$. Тогда $\exists N \in \N\ \forall n > N\ \forall t \in E:\ |f'_n(t) - g(t)| < \eps/C$. Значит, $\forall n > N$ и $\forall x \in I$:
\begin{gather}
\left| \int\limits_{x_0}^x f'_n(t) \d t - \int\limits_{x_0}^x g(t) \d t \right| \leq \left| \int\limits_{x_0}^x |f'_n(t) - g(t)| \d t \right| \leq \eps/C |x_0 - x| < \eps.
\end{gather}

В первом переходе модуль появился, потому что мы не знаем взаимное расположение точек $x_0$ и $x$.
\end{proof}

Можно доказать более общее утверждение, которое отличается от предыдущего заменой $C'(I)$ на $D(I)$, то есть достаточно того, что функции дифференцируемы. Но мы этим заниматься не будем.

А нужно ли нам, чтобы существовала такая точка $x_0$? Конечно! Пусть, например, $f_n(x)~=~n$. Тогда в каждой точке расходимость к бесконечности. А с другой стороны, $f'_n(x) = 0$ и последовательность производных сходится.








\end{document}